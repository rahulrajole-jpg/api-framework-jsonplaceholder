{"uid":"ea24db02fb901609","name":"test_post_count_per_user_and_orphan_posts","fullName":"tests.test_posts#test_post_count_per_user_and_orphan_posts","historyId":"c4fdc2098082e1002ef09558e9ba3bae","time":{"start":1769619016748,"stop":1769619020591,"duration":3843},"status":"broken","statusMessage":"sqlite3.IntegrityError: UNIQUE constraint failed: posts.id","statusTrace":"api_client = <src.api.base_client.BaseClient object at 0x1071372e0>, db = <db.sqlite_client.SQLiteClient object at 0x107194c40>\n\n    @pytest.mark.db\n    def test_post_count_per_user_and_orphan_posts(api_client, db):\n        users_api = UsersAPI(api_client.base_url)\n        posts_api = PostsAPI(api_client.base_url)\n        users = users_api.get_users().json()\n        posts = posts_api.get_posts().json()\n        user_ids = {u[\"id\"] for u in users}\n        # Insert all posts into DB for this test\n        for post in posts:\n>           db.insert(\"posts\", {k: post[k] for k in (\"id\", \"userId\", \"title\", \"body\")})\n\ntests/test_posts.py:95: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <db.sqlite_client.SQLiteClient object at 0x107194c40>, table = 'posts'\ndata = {'body': 'et iusto sed quo iure\\nvoluptatem occaecati omnis eligendi aut ad\\nvoluptatem doloribus vel accusantium quis... et labore et velit aut', 'id': 3, 'title': 'ea molestias quasi exercitationem repellat qui ipsa sit aut', 'userId': 1}\n\n    def insert(self, table, data):\n        keys = ','.join(data.keys())\n        question_marks = ','.join(['?'] * len(data))\n        values = tuple(data.values())\n>       self.conn.execute(f\"INSERT INTO {table} ({keys}) VALUES ({question_marks})\", values)\nE       sqlite3.IntegrityError: UNIQUE constraint failed: posts.id\n\ndb/sqlite_client.py:30: IntegrityError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"config","time":{"start":1769619013338,"stop":1769619013342,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"db","time":{"start":1769619013342,"stop":1769619013344,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1769619013342,"stop":1769619013342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_client","time":{"start":1769619013342,"stop":1769619013342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"sqlite3.IntegrityError: UNIQUE constraint failed: posts.id","statusTrace":"api_client = <src.api.base_client.BaseClient object at 0x1071372e0>, db = <db.sqlite_client.SQLiteClient object at 0x107194c40>\n\n    @pytest.mark.db\n    def test_post_count_per_user_and_orphan_posts(api_client, db):\n        users_api = UsersAPI(api_client.base_url)\n        posts_api = PostsAPI(api_client.base_url)\n        users = users_api.get_users().json()\n        posts = posts_api.get_posts().json()\n        user_ids = {u[\"id\"] for u in users}\n        # Insert all posts into DB for this test\n        for post in posts:\n>           db.insert(\"posts\", {k: post[k] for k in (\"id\", \"userId\", \"title\", \"body\")})\n\ntests/test_posts.py:95: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <db.sqlite_client.SQLiteClient object at 0x107194c40>, table = 'posts'\ndata = {'body': 'et iusto sed quo iure\\nvoluptatem occaecati omnis eligendi aut ad\\nvoluptatem doloribus vel accusantium quis... et labore et velit aut', 'id': 3, 'title': 'ea molestias quasi exercitationem repellat qui ipsa sit aut', 'userId': 1}\n\n    def insert(self, table, data):\n        keys = ','.join(data.keys())\n        question_marks = ','.join(['?'] * len(data))\n        values = tuple(data.values())\n>       self.conn.execute(f\"INSERT INTO {table} ({keys}) VALUES ({question_marks})\", values)\nE       sqlite3.IntegrityError: UNIQUE constraint failed: posts.id\n\ndb/sqlite_client.py:30: IntegrityError","steps":[],"attachments":[{"uid":"5f411936930b8b9","name":"Response for https://jsonplaceholder.typicode.com/users","source":"5f411936930b8b9.json","type":"application/json","size":4423},{"uid":"b73b483a98f00b32","name":"Response for https://jsonplaceholder.typicode.com/posts","source":"b73b483a98f00b32.json","type":"application/json","size":25318},{"uid":"2d37081e2a0de8c5","name":"log","source":"2d37081e2a0de8c5.txt","type":"text/plain","size":30168},{"uid":"ca7e3e44f040921","name":"stderr","source":"ca7e3e44f040921.txt","type":"text/plain","size":30199}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":4,"stepsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"db"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_posts"},{"name":"host","value":"GS-6209.lan"},{"name":"thread","value":"41680-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_posts"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["db"]},"source":"ea24db02fb901609.json","parameterValues":[]}